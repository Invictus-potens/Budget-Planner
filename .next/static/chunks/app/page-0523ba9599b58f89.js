(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{74699:(e,t,s)=>{Promise.resolve().then(s.bind(s,60957))},60957:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>L});var a=s(95155),r=s(56127),n=s(12115),l=s(7266),i=s(76046);function c(e){let{activeTab:t,setActiveTab:s,tabs:n,selectedMonth:c,setSelectedMonth:o}=e,{user:d,signOut:x}=(0,r.A)(),m=(0,i.useRouter)(),u=(0,i.usePathname)(),p=(0,l.useLocale)(),h=(0,l.useTranslations)(),g=async()=>{await x()};return(0,a.jsx)("header",{className:"bg-white/80 backdrop-blur-sm border-b border-purple-100 sticky top-0 z-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Budget Planner"}),(0,a.jsx)("nav",{className:"hidden md:flex space-x-1",children:n.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all duration-200 flex items-center space-x-2 ".concat(t===e.id?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"),children:[(0,a.jsx)("i",{className:"".concat(e.icon," text-sm")}),(0,a.jsx)("span",{children:h("tabs.".concat(e.id))})]},e.id))})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("i",{className:"ri-calendar-line text-gray-500"}),(0,a.jsx)("input",{type:"month",value:c,onChange:e=>o(e.target.value),className:"text-sm border border-gray-200 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300","aria-label":"Select month"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:p,onChange:e=>{let t=e.target.value;m.replace("/".concat(t).concat(u.startsWith("/")?u:"/".concat(u)))},className:"text-sm border border-gray-200 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300","aria-label":"Select language",children:[(0,a.jsx)("option",{value:"pt",children:"Portugu\xeas"}),(0,a.jsx)("option",{value:"en",children:"English"})]}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:null==d?void 0:d.email}),(0,a.jsxs)("button",{onClick:g,className:"text-sm text-gray-600 hover:text-purple-600 transition-colors duration-200 flex items-center space-x-1",children:[(0,a.jsx)("i",{className:"ri-logout-box-r-line"}),(0,a.jsx)("span",{children:h("signOut")})]})]})]})]}),(0,a.jsx)("div",{className:"md:hidden flex space-x-1 pb-2 overflow-x-auto",children:n.map(e=>(0,a.jsxs)("button",{onClick:()=>s(e.id),className:"px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap flex items-center space-x-1 ".concat(t===e.id?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"),children:[(0,a.jsx)("i",{className:"".concat(e.icon," text-xs")}),(0,a.jsx)("span",{children:h("tabs.".concat(e.id))})]},e.id))})]})})}let o=[{id:"housing",name:"Housing",icon:"ri-home-line",color:"bg-blue-500"},{id:"transportation",name:"Transportation",icon:"ri-car-line",color:"bg-green-500"},{id:"food",name:"Food & Dining",icon:"ri-restaurant-line",color:"bg-orange-500"},{id:"healthcare",name:"Healthcare & Insurance",icon:"ri-heart-pulse-line",color:"bg-red-500"},{id:"debt",name:"Debt Payments",icon:"ri-bank-card-line",color:"bg-gray-500"},{id:"savings",name:"Savings",icon:"ri-safe-line",color:"bg-emerald-500"},{id:"entertainment",name:"Entertainment",icon:"ri-gamepad-line",color:"bg-purple-500"},{id:"personal",name:"Personal Care",icon:"ri-user-heart-line",color:"bg-pink-500"},{id:"subscriptions",name:"Subscriptions",icon:"ri-smartphone-line",color:"bg-indigo-500"},{id:"pets",name:"Pets",icon:"ri-heart-line",color:"bg-amber-500"},{id:"gifts",name:"Gifts & Donations",icon:"ri-gift-line",color:"bg-rose-500"},{id:"miscellaneous",name:"Miscellaneous",icon:"ri-more-line",color:"bg-slate-500"}],d=[{id:"salary",name:"Salary",icon:"ri-money-dollar-circle-line",color:"bg-green-600"},{id:"freelance",name:"Freelance Income",icon:"ri-computer-line",color:"bg-blue-600"},{id:"investments",name:"Investments",icon:"ri-line-chart-line",color:"bg-purple-600"},{id:"other",name:"Other Income",icon:"ri-wallet-3-line",color:"bg-teal-600"}],x=[{id:"checking",name:"Checking Account",icon:"ri-bank-line"},{id:"savings",name:"Savings Account",icon:"ri-safe-line"},{id:"cash",name:"Cash",icon:"ri-money-dollar-circle-line"},{id:"credit",name:"Credit Card",icon:"ri-bank-card-line"}];function m(e){let{onSubmit:t}=e,[s,r]=(0,n.useState)("expense"),[l,i]=(0,n.useState)(""),[c,m]=(0,n.useState)(""),[u,p]=(0,n.useState)(""),[h,g]=(0,n.useState)(new Date().toISOString().split("T")[0]),[b,j]=(0,n.useState)(x[0].id),f="income"===s?d:o;return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[(0,a.jsx)("i",{className:"ri-add-circle-line text-purple-600 mr-2"}),"Add Transaction"]}),(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),l&&c&&(t({type:s,amount:parseFloat(l),category:c,description:u,date:h,account:b}),i(""),m(""),p(""))},className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex rounded-lg bg-gray-50 p-1",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>{r("expense"),m("")},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat("expense"===s?"bg-red-100 text-red-700 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,a.jsx)("i",{className:"ri-arrow-down-line mr-1"}),"Expense"]}),(0,a.jsxs)("button",{type:"button",onClick:()=>{r("income"),m("")},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat("income"===s?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,a.jsx)("i",{className:"ri-arrow-up-line mr-1"}),"Income"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"ri-money-dollar-circle-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"number",step:"0.01",value:l,onChange:e=>i(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm",placeholder:"0.00",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"ri-price-tag-3-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm appearance-none bg-white",required:!0,children:[(0,a.jsx)("option",{value:"",children:"Select category"}),f.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,a.jsx)("i",{className:"ri-arrow-down-s-line absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"ri-bank-card-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("select",{value:b,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm appearance-none bg-white",children:x.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,a.jsx)("i",{className:"ri-arrow-down-s-line absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"ri-file-text-line absolute left-3 top-3 text-gray-400"}),(0,a.jsx)("textarea",{value:u,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm resize-none",placeholder:"Optional description...",rows:3})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("i",{className:"ri-calendar-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,a.jsx)("input",{type:"date",value:h,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm",required:!0})]})]}),(0,a.jsxs)("button",{type:"submit",className:"w-full py-3 px-4 rounded-lg font-medium whitespace-nowrap transition-all ".concat("expense"===s?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:[(0,a.jsx)("i",{className:"ri-add-line mr-2"}),"Add ","expense"===s?"Expense":"Income"]})]})]})}let u=(e,t)=>{if(0===e.length)return;let s=Object.keys(e[0]),a=new Blob([[s.join(","),...e.map(e=>s.map(t=>'"'.concat(e[t]||"",'"')).join(","))].join("\\n")],{type:"text/csv"}),r=window.URL.createObjectURL(a),n=document.createElement("a");n.href=r,n.download=t,n.click(),window.URL.revokeObjectURL(r)};function p(e){let{transactions:t,onDelete:s,selectedMonth:r}=e,[l,i]=(0,n.useState)("all"),[c,m]=(0,n.useState)("all"),[p,h]=(0,n.useState)("date"),[g,b]=(0,n.useState)("desc"),j=[...t.filter(e=>e.date.startsWith(r)).filter(e=>("all"===l||e.type===l)&&("all"===c||e.category===c))].sort((e,t)=>{let s=0;return s="date"===p?new Date(e.date).getTime()-new Date(t.date).getTime():e.amount-t.amount,"asc"===g?s:-s}),f=[...o,...d],y=e=>f.find(t=>t.id===e)||{name:"Unknown",icon:"ri-question-line",color:"bg-gray-500"},v=e=>x.find(t=>t.id===e)||{name:"Unknown",icon:"ri-question-line"};return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)("i",{className:"ri-list-check-line text-purple-600 mr-2"}),"Transactions (",j.length,")"]}),(0,a.jsxs)("button",{onClick:()=>{u(j.map(e=>{var t;return{Date:e.date,Type:e.type,Category:y(e.category).name,Description:e.description,Account:v(null!==(t=e.account)&&void 0!==t?t:"").name,Amount:e.amount}}),"transactions-".concat(r,".csv"))},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium whitespace-nowrap flex items-center",disabled:0===j.length,children:[(0,a.jsx)("i",{className:"ri-download-line mr-2"}),"Export CSV"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),(0,a.jsxs)("select",{value:l,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"income",children:"Income"}),(0,a.jsx)("option",{value:"expense",children:"Expense"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),(0,a.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",children:[(0,a.jsx)("option",{value:"all",children:"All Categories"}),f.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort by"}),(0,a.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",children:[(0,a.jsx)("option",{value:"date",children:"Date"}),(0,a.jsx)("option",{value:"amount",children:"Amount"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),(0,a.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",children:[(0,a.jsx)("option",{value:"desc",children:"Newest First"}),(0,a.jsx)("option",{value:"asc",children:"Oldest First"})]})]})]}),0===j.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("i",{className:"ri-file-list-line text-4xl text-gray-300 mb-4"}),(0,a.jsx)("p",{className:"text-gray-500",children:"No transactions found for the selected filters."})]}):(0,a.jsx)("div",{className:"space-y-3",children:j.map(e=>{var t;let r=y(e.category),n=v(null!==(t=e.account)&&void 0!==t?t:"");return(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(r.color),children:(0,a.jsx)("i",{className:"".concat(r.icon," text-white")})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:r.name}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("income"===e.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.type})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.description||"No description"}),(0,a.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500 mt-1",children:[(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"ri-calendar-line mr-1"}),new Date(e.date).toLocaleDateString()]}),(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("i",{className:"".concat(n.icon," mr-1")}),n.name]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:"text-lg font-bold ".concat("income"===e.type?"text-green-600":"text-red-600"),children:["income"===e.type?"+":"-","$",e.amount.toFixed(2)]})}),(0,a.jsx)("button",{onClick:()=>s(e.id),className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",children:(0,a.jsx)("i",{className:"ri-delete-bin-line"})})]})]},e.id)})})]})}function h(e){let{transactions:t,selectedMonth:s,budgetLimits:r}=e,n=t.filter(e=>e.date.startsWith(s)),l=n.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),i=n.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),c=l-i,x=o.map(e=>{let t=n.filter(t=>"expense"===t.type&&t.category===e.id),s=t.reduce((e,t)=>e+t.amount,0),a=r.find(t=>t.categoryId===e.id);return{...e,total:s,transactions:t,budgetLimit:(null==a?void 0:a.limit)||0,percentage:i>0?s/i*100:0}}).filter(e=>e.total>0||e.budgetLimit>0),m=d.map(e=>{let t=n.filter(t=>"income"===t.type&&t.category===e.id),s=t.reduce((e,t)=>e+t.amount,0);return{...e,total:s,transactions:t,percentage:l>0?s/l*100:0}}).filter(e=>e.total>0);return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"bg-green-50 rounded-2xl p-6 border border-green-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Total Income"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:["$",l.toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-arrow-up-line text-green-600 text-xl"})})]})}),(0,a.jsx)("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-red-600 text-sm font-medium",children:"Total Expenses"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-red-700",children:["$",i.toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-arrow-down-line text-red-600 text-xl"})})]})}),(0,a.jsx)("div",{className:"".concat(c>=0?"bg-blue-50 border-blue-100":"bg-orange-50 border-orange-100"," rounded-2xl p-6 border"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(c>=0?"text-blue-600":"text-orange-600"," text-sm font-medium"),children:"Balance"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(c>=0?"text-blue-700":"text-orange-700"),children:["$",Math.abs(c).toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-12 h-12 ".concat(c>=0?"bg-blue-100":"bg-orange-100"," rounded-full flex items-center justify-center"),children:(0,a.jsx)("i",{className:"".concat(c>=0?"ri-wallet-line text-blue-600":"ri-alert-line text-orange-600"," text-xl")})})]})})]}),x.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)("i",{className:"ri-pie-chart-line text-red-600 mr-2"}),"Expense Categories"]}),(0,a.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,a.jsx)("i",{className:"".concat(e.icon," text-white")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.transactions.length," transactions"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-gray-800",children:["$",e.total.toFixed(2)]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.percentage.toFixed(1),"%"]}),e.budgetLimit>0&&(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(e.total>e.budgetLimit?"bg-red-100 text-red-600":"bg-green-100 text-green-600"),children:["$",e.budgetLimit," limit"]})]})]})]},e.id))})]}),m.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,a.jsx)("i",{className:"ri-line-chart-line text-green-600 mr-2"}),"Income Sources"]}),(0,a.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,a.jsx)("i",{className:"".concat(e.icon," text-white")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.transactions.length," transactions"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-bold text-gray-800",children:["$",e.total.toFixed(2)]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.percentage.toFixed(1),"%"]})]})]},e.id))})]})]})}var g=s(58581),b=s(22175),j=s(90457),f=s(67732),y=s(27112),v=s(394),N=s(15255),w=s(12800),k=s(66963),C=s(86354),S=s(23021),F=s(94973),E=s(16161);function B(e){let{transactions:t,selectedMonth:s}=e,[r,l]=(0,n.useState)("pie"),i=t.filter(e=>e.date.startsWith(s)),c=o.map(e=>{let t=i.filter(t=>"expense"===t.type&&t.category===e.id).reduce((e,t)=>e+t.amount,0);return{name:e.name,value:t,color:e.color.replace("bg-","").replace("-500","")}}).filter(e=>e.value>0),x=[...o,...d].map(e=>{let t=i.filter(t=>"expense"===t.type&&t.category===e.id).reduce((e,t)=>e+t.amount,0),s=i.filter(t=>"income"===t.type&&t.category===e.id).reduce((e,t)=>e+t.amount,0);return 0===t&&0===s?null:{category:e.name,expenses:t,income:s}}).filter(Boolean),m=(()=>{let e=[],s=new Date;for(let a=5;a>=0;a--){let r=new Date(s.getFullYear(),s.getMonth()-a,1),n=r.toISOString().slice(0,7),l=t.filter(e=>e.date.startsWith(n)),i=l.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),c=l.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);e.push({month:r.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),income:i,expenses:c,balance:i-c})}return e})(),u={blue:"#3B82F6",green:"#10B981",orange:"#F59E0B",red:"#EF4444",gray:"#6B7280",emerald:"#059669",purple:"#8B5CF6",pink:"#EC4899",indigo:"#6366F1",amber:"#F59E0B",rose:"#F43F5E",slate:"#64748B"},p=e=>u[e.split("-")[0]]||"#6B7280";return(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Charts & Analytics"}),(0,a.jsx)("div",{className:"flex rounded-lg bg-gray-50 p-1",children:[{id:"pie",label:"Expense Breakdown",icon:"ri-pie-chart-line"},{id:"bar",label:"Category Comparison",icon:"ri-bar-chart-line"},{id:"line",label:"Trends",icon:"ri-line-chart-line"}].map(e=>(0,a.jsxs)("button",{onClick:()=>l(e.id),className:"px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-all flex items-center space-x-2 ".concat(r===e.id?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600"),children:[(0,a.jsx)("i",{className:"".concat(e.icon," text-sm")}),(0,a.jsx)("span",{children:e.label})]},e.id))})]}),(0,a.jsxs)("div",{className:"h-96",children:["pie"===r&&(0,a.jsx)("div",{children:c.length>0?(0,a.jsx)(g.u,{width:"100%",height:"100%",children:(0,a.jsxs)(b.r,{children:[(0,a.jsx)(j.F,{data:c,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",label:e=>{let{name:t,percent:s}=e;return"".concat(t," ").concat((100*s).toFixed(0),"%")},children:c.map((e,t)=>(0,a.jsx)(f.f,{fill:p(e.color)},"cell-".concat(t)))}),(0,a.jsx)(y.m,{formatter:e=>["$".concat(e.toFixed(2)),"Amount"]})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("i",{className:"ri-pie-chart-line text-4xl mb-4"}),(0,a.jsx)("p",{children:"No expense data available for this month"})]})})}),"bar"===r&&(0,a.jsx)("div",{children:x.length>0?(0,a.jsx)(g.u,{width:"100%",height:"100%",children:(0,a.jsxs)(v.E,{data:x,margin:{top:20,right:30,left:20,bottom:60},children:[(0,a.jsx)(N.d,{strokeDasharray:"3 3"}),(0,a.jsx)(w.W,{dataKey:"category",angle:-45,textAnchor:"end",height:80,fontSize:12}),(0,a.jsx)(k.h,{}),(0,a.jsx)(y.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,a.jsx)(C.s,{}),(0,a.jsx)(S.y,{dataKey:"income",fill:"#10B981",name:"Income"}),(0,a.jsx)(S.y,{dataKey:"expenses",fill:"#EF4444",name:"Expenses"})]})}):(0,a.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("i",{className:"ri-bar-chart-line text-4xl mb-4"}),(0,a.jsx)("p",{children:"No transaction data available for comparison"})]})})}),"line"===r&&(0,a.jsx)("div",{children:(0,a.jsx)(g.u,{width:"100%",height:"100%",children:(0,a.jsxs)(F.b,{data:m,margin:{top:20,right:30,left:20,bottom:5},children:[(0,a.jsx)(N.d,{strokeDasharray:"3 3"}),(0,a.jsx)(w.W,{dataKey:"month"}),(0,a.jsx)(k.h,{}),(0,a.jsx)(y.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,a.jsx)(C.s,{}),(0,a.jsx)(E.N,{type:"monotone",dataKey:"income",stroke:"#10B981",strokeWidth:2,name:"Income"}),(0,a.jsx)(E.N,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",strokeWidth:2,name:"Expenses"}),(0,a.jsx)(E.N,{type:"monotone",dataKey:"balance",stroke:"#3B82F6",strokeWidth:2,name:"Balance"})]})})})]})]})}function D(e){let{budgetLimits:t,onUpdate:s,transactions:r,selectedMonth:l}=e,[i,c]=(0,n.useState)(null),[d,x]=(0,n.useState)(""),m=r.filter(e=>e.date.startsWith(l)&&"expense"===e.type),u=o.map(e=>{let s=m.filter(t=>t.category===e.id).reduce((e,t)=>e+t.amount,0),a=t.find(t=>t.categoryId===e.id),r=(null==a?void 0:a.limit)||0;return{...e,spent:s,limit:r,percentage:r>0?s/r*100:0,isOverBudget:r>0&&s>r,remaining:r>0?r-s:0}}),p=(e,t)=>{c(e),x(t.toString())},h=e=>{s(e,parseFloat(d)||0),c(null),x("")},g=()=>{c(null),x("")},b=u.reduce((e,t)=>e+t.limit,0),j=u.reduce((e,t)=>e+t.spent,0),f=u.filter(e=>e.isOverBudget).length;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6 border border-blue-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Total Budget"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:["$",b.toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-wallet-line text-blue-600 text-xl"})})]})}),(0,a.jsx)("div",{className:"bg-purple-50 rounded-2xl p-6 border border-purple-100",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Total Spent"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:["$",j.toFixed(2)]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("i",{className:"ri-shopping-cart-line text-purple-600 text-xl"})})]})}),(0,a.jsx)("div",{className:"".concat(f>0?"bg-red-50 border-red-100":"bg-green-50 border-green-100"," rounded-2xl p-6 border"),children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"".concat(f>0?"text-red-600":"text-green-600"," text-sm font-medium"),children:"Over Budget"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(f>0?"text-red-700":"text-green-700"),children:[f," ",1===f?"Category":"Categories"]})]}),(0,a.jsx)("div",{className:"w-12 h-12 ".concat(f>0?"bg-red-100":"bg-green-100"," rounded-full flex items-center justify-center"),children:(0,a.jsx)("i",{className:"".concat(f>0?"ri-alert-line text-red-600":"ri-check-line text-green-600"," text-xl")})})]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center",children:[(0,a.jsx)("i",{className:"ri-settings-line text-purple-600 mr-2"}),"Budget Limits by Category"]}),(0,a.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,a.jsx)("i",{className:"".concat(e.icon," text-white")})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["Spent: $",e.spent.toFixed(2),e.limit>0&&(0,a.jsxs)("span",{className:"ml-2",children:["/ $",e.limit.toFixed(2)," (",e.percentage.toFixed(1),"%)"]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isOverBudget&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-600 text-xs rounded-full",children:["Over by $",(e.spent-e.limit).toFixed(2)]}),i===e.id?(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:"$"}),(0,a.jsx)("input",{type:"number",value:d,onChange:e=>x(e.target.value),className:"w-24 pl-6 pr-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",placeholder:"0.00"})]}),(0,a.jsx)("button",{onClick:()=>h(e.id),className:"w-6 h-6 flex items-center justify-center text-green-600 hover:bg-green-50 rounded",children:(0,a.jsx)("i",{className:"ri-check-line text-sm"})}),(0,a.jsx)("button",{onClick:g,className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:bg-gray-50 rounded",children:(0,a.jsx)("i",{className:"ri-close-line text-sm"})})]}):(0,a.jsxs)("button",{onClick:()=>p(e.id,e.limit),className:"px-3 py-1 text-sm text-purple-600 hover:bg-purple-50 rounded-lg transition-colors flex items-center space-x-1",children:[(0,a.jsx)("i",{className:"ri-edit-line text-xs"}),(0,a.jsxs)("span",{children:[e.limit>0?"Edit":"Set"," Limit"]})]})]})]}),e.limit>0&&(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(e.isOverBudget?"bg-red-500":"bg-green-500"),style:{width:"".concat(Math.min(e.percentage,100),"%")}})})]},e.id))})]})]})}var A=s(26855),I=s(13697);function O(){let[e,t]=(0,n.useState)([]),[s,i]=(0,n.useState)([]),[o,d]=(0,n.useState)("overview"),[x,u]=(0,n.useState)(new Date().toISOString().slice(0,7)),{user:g}=(0,r.A)(),b=(0,l.useTranslations)();(0,n.useEffect)(()=>{if(g){j();let e=null===A.ND||void 0===A.ND?void 0:A.ND.channel("realtime-transactions").on("postgres_changes",{event:"INSERT",schema:"public",table:"transactions",filter:"user_id=eq.".concat(g.id)},e=>{let s=e.new;t(e=>e.some(e=>e.id===s.id)?e:[...e,s])}).subscribe();return()=>{null==e||e.unsubscribe()}}},[g]);let j=async()=>{if(g)try{let[e,s]=await Promise.all([(0,A.I0)(g.id),(0,A.w_)(g.id)]);e.data&&t(e.data),s.data&&i(s.data)}catch(e){console.error("Error loading data:",e)}},f=async e=>{if(!g)return;let s={...e,id:(0,I.A)()},{account:a,...r}=s;try{let{error:e}=await (0,A.KA)(r,g.id);e||t(e=>[...e,s])}catch(e){console.error("Error saving transaction:",e)}},y=async e=>{if(g)try{let{error:s}=await (0,A.Uw)(e,g.id);s||t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting transaction:",e)}},v=async(e,t)=>{if(!g)return;let a=s.filter(t=>t.categoryId!==e);t>0&&a.push({categoryId:e,limit:t});try{let{error:s}=await (0,A.CQ)({categoryId:e,limit:t},g.id);s||i(a)}catch(e){console.error("Error saving budget limit:",e)}},N=[{id:"overview",label:b("tabs.overview"),icon:"ri-dashboard-line"},{id:"transactions",label:b("tabs.transactions"),icon:"ri-list-check-line"},{id:"charts",label:b("tabs.charts"),icon:"ri-bar-chart-line"},{id:"budgets",label:b("tabs.budgets"),icon:"ri-wallet-line"}];return(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:[(0,a.jsx)(c,{activeTab:o,setActiveTab:d,tabs:N,selectedMonth:x,setSelectedMonth:u}),(0,a.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:["overview"===o&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsx)(m,{onSubmit:f})}),(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(h,{transactions:e,selectedMonth:x,budgetLimits:s})})]}),"transactions"===o&&(0,a.jsx)(p,{transactions:e,onDelete:y,selectedMonth:x}),"charts"===o&&(0,a.jsx)(B,{transactions:e,selectedMonth:x}),"budgets"===o&&(0,a.jsx)(D,{budgetLimits:s,onUpdate:v,transactions:e,selectedMonth:x})]})]})}var T=s(53187);function L(){let{user:e,loading:t}=(0,r.A)();return t?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("i",{className:"ri-loader-4-line animate-spin text-4xl text-purple-600 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,a.jsx)(O,{}):(0,a.jsx)(T.default,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[232,8,187,441,517,358],()=>t(74699)),_N_E=e.O()}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{74699:(e,t,a)=>{Promise.resolve().then(a.bind(a,56182))},56182:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>R});var s=a(95155),r=a(56127),l=a(12115),i=a(76046);function n(e){let{activeTab:t,setActiveTab:a,tabs:l,selectedMonth:n,setSelectedMonth:c}=e,{user:o,signOut:d}=(0,r.A)();(0,i.useRouter)(),(0,i.usePathname)();let x=async()=>{await d()};return(0,s.jsx)("header",{className:"bg-white/80 backdrop-blur-sm border-b border-purple-100 sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Budget Planner"}),(0,s.jsx)("nav",{className:"hidden md:flex space-x-1",children:l.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-all duration-200 flex items-center space-x-2 ".concat(t===e.id?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"),children:[(0,s.jsx)("i",{className:"".concat(e.icon," text-sm")}),(0,s.jsx)("span",{children:e.label})]},e.id))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("i",{className:"ri-calendar-line text-gray-500"}),(0,s.jsx)("input",{type:"month",value:n,onChange:e=>c(e.target.value),className:"text-sm border border-gray-200 rounded-lg px-3 py-1 focus:outline-none focus:ring-2 focus:ring-purple-300","aria-label":"Select month"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-600",children:null==o?void 0:o.email}),(0,s.jsxs)("button",{onClick:x,className:"text-sm text-gray-600 hover:text-purple-600 transition-colors duration-200 flex items-center space-x-1",children:[(0,s.jsx)("i",{className:"ri-logout-box-r-line"}),(0,s.jsx)("span",{children:"Sign Out"})]})]})]}),(0,s.jsx)("div",{className:"md:hidden flex space-x-1 pb-2 overflow-x-auto",children:l.map(e=>(0,s.jsxs)("button",{onClick:()=>a(e.id),className:"px-3 py-1 rounded-full text-xs font-medium whitespace-nowrap flex items-center space-x-1 ".concat(t===e.id?"bg-purple-100 text-purple-700":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"),children:[(0,s.jsx)("i",{className:"".concat(e.icon," text-xs")}),(0,s.jsx)("span",{children:e.label})]},e.id))})]})})}let c=[{id:"housing",name:"Housing",icon:"ri-home-line",color:"bg-blue-500"},{id:"transportation",name:"Transportation",icon:"ri-car-line",color:"bg-green-500"},{id:"food",name:"Food & Dining",icon:"ri-restaurant-line",color:"bg-orange-500"},{id:"healthcare",name:"Healthcare & Insurance",icon:"ri-heart-pulse-line",color:"bg-red-500"},{id:"debt",name:"Debt Payments",icon:"ri-bank-card-line",color:"bg-gray-500"},{id:"savings",name:"Savings",icon:"ri-safe-line",color:"bg-emerald-500"},{id:"entertainment",name:"Entertainment",icon:"ri-gamepad-line",color:"bg-purple-500"},{id:"personal",name:"Personal Care",icon:"ri-user-heart-line",color:"bg-pink-500"},{id:"subscriptions",name:"Subscriptions",icon:"ri-smartphone-line",color:"bg-indigo-500"},{id:"pets",name:"Pets",icon:"ri-heart-line",color:"bg-amber-500"},{id:"gifts",name:"Gifts & Donations",icon:"ri-gift-line",color:"bg-rose-500"},{id:"miscellaneous",name:"Miscellaneous",icon:"ri-more-line",color:"bg-slate-500"}],o=[{id:"salary",name:"Salary",icon:"ri-money-dollar-circle-line",color:"bg-green-600"},{id:"freelance",name:"Freelance Income",icon:"ri-computer-line",color:"bg-blue-600"},{id:"investments",name:"Investments",icon:"ri-line-chart-line",color:"bg-purple-600"},{id:"other",name:"Other Income",icon:"ri-wallet-3-line",color:"bg-teal-600"}],d=[{id:"checking",name:"Checking Account",icon:"ri-bank-line"},{id:"savings",name:"Savings Account",icon:"ri-safe-line"},{id:"cash",name:"Cash",icon:"ri-money-dollar-circle-line"},{id:"credit",name:"Credit Card",icon:"ri-bank-card-line"}];function x(e){let{onSubmit:t}=e,[a,r]=(0,l.useState)("expense"),[i,n]=(0,l.useState)(""),[x,m]=(0,l.useState)(""),[u,p]=(0,l.useState)(""),[g,h]=(0,l.useState)(new Date().toISOString().split("T")[0]),[b,j]=(0,l.useState)(d[0].id),f="income"===a?o:c;return(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("i",{className:"ri-add-circle-line text-purple-600 mr-2"}),"Add Transaction"]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i&&x&&(t({type:a,amount:parseFloat(i),category:x,description:u,date:g,account:b}),n(""),m(""),p(""))},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex rounded-lg bg-gray-50 p-1",children:[(0,s.jsxs)("button",{type:"button",onClick:()=>{r("expense"),m("")},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat("expense"===a?"bg-red-100 text-red-700 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,s.jsx)("i",{className:"ri-arrow-down-line mr-1"}),"Expense"]}),(0,s.jsxs)("button",{type:"button",onClick:()=>{r("income"),m("")},className:"flex-1 py-2 px-4 rounded-md text-sm font-medium whitespace-nowrap transition-all ".concat("income"===a?"bg-green-100 text-green-700 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[(0,s.jsx)("i",{className:"ri-arrow-up-line mr-1"}),"Income"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"ri-money-dollar-circle-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"number",step:"0.01",value:i,onChange:e=>n(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm",placeholder:"0.00",required:!0})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"ri-price-tag-3-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm appearance-none bg-white",required:!0,children:[(0,s.jsx)("option",{value:"",children:"Select category"}),f.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Account"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"ri-bank-card-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("select",{value:b,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm appearance-none bg-white",children:d.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,s.jsx)("i",{className:"ri-arrow-down-s-line absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"ri-file-text-line absolute left-3 top-3 text-gray-400"}),(0,s.jsx)("textarea",{value:u,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm resize-none",placeholder:"Optional description...",rows:3})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("i",{className:"ri-calendar-line absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,s.jsx)("input",{type:"date",value:g,onChange:e=>h(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-300 text-sm",required:!0})]})]}),(0,s.jsxs)("button",{type:"submit",className:"w-full py-3 px-4 rounded-lg font-medium whitespace-nowrap transition-all ".concat("expense"===a?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:[(0,s.jsx)("i",{className:"ri-add-line mr-2"}),"Add ","expense"===a?"Expense":"Income"]})]})]})}let m=(e,t)=>{if(0===e.length)return;let a=Object.keys(e[0]),s=new Blob([[a.join(","),...e.map(e=>a.map(t=>'"'.concat(e[t]||"",'"')).join(","))].join("\\n")],{type:"text/csv"}),r=window.URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=t,l.click(),window.URL.revokeObjectURL(r)};function u(e){let{transactions:t,onDelete:a,selectedMonth:r}=e,[i,n]=(0,l.useState)("all"),[x,u]=(0,l.useState)("all"),[p,g]=(0,l.useState)("date"),[h,b]=(0,l.useState)("desc"),j=[...t.filter(e=>e.date.startsWith(r)).filter(e=>("all"===i||e.type===i)&&("all"===x||e.category===x))].sort((e,t)=>{let a=0;return a="date"===p?new Date(e.date).getTime()-new Date(t.date).getTime():e.amount-t.amount,"asc"===h?a:-a}),f=[...c,...o],v=e=>f.find(t=>t.id===e)||{name:"Unknown",icon:"ri-question-line",color:"bg-gray-500"},y=e=>d.find(t=>t.id===e)||{name:"Unknown",icon:"ri-question-line"};return(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-4 sm:space-y-0",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,s.jsx)("i",{className:"ri-list-check-line text-purple-600 mr-2"}),"Transa\xe7\xf5es (",j.length,")"]}),(0,s.jsxs)("button",{onClick:()=>{m(j.map(e=>{var t;return{Date:e.date,Type:e.type,Category:v(e.category).name,Description:e.description,Account:y(null!==(t=e.account)&&void 0!==t?t:"").name,Amount:e.amount}}),"transactions-".concat(r,".csv"))},className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm font-medium whitespace-nowrap flex items-center",disabled:0===j.length,title:"Exportar transa\xe7\xf5es para CSV",children:[(0,s.jsx)("i",{className:"ri-download-line mr-2"}),"Exportar CSV"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipo"}),(0,s.jsxs)("select",{value:i,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",title:"Filtrar por tipo",children:[(0,s.jsx)("option",{value:"all",children:"Todos os Tipos"}),(0,s.jsx)("option",{value:"income",children:"Receita"}),(0,s.jsx)("option",{value:"expense",children:"Despesa"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria"}),(0,s.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",title:"Filtrar por categoria",children:[(0,s.jsx)("option",{value:"all",children:"Todas as Categorias"}),f.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordenar por"}),(0,s.jsxs)("select",{value:p,onChange:e=>g(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",title:"Ordenar por",children:[(0,s.jsx)("option",{value:"date",children:"Data"}),(0,s.jsx)("option",{value:"amount",children:"Valor"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ordem"}),(0,s.jsxs)("select",{value:h,onChange:e=>b(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",title:"Ordem de exibi\xe7\xe3o",children:[(0,s.jsx)("option",{value:"desc",children:"Mais Recentes"}),(0,s.jsx)("option",{value:"asc",children:"Mais Antigas"})]})]})]}),0===j.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("i",{className:"ri-file-list-line text-4xl text-gray-300 mb-4"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Nenhuma transa\xe7\xe3o encontrada."})]}):(0,s.jsx)("div",{className:"space-y-3",children:j.map(e=>{var t;let r=v(e.category),l=y(null!==(t=e.account)&&void 0!==t?t:"");return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center ".concat(r.color),children:(0,s.jsx)("i",{className:"".concat(r.icon," text-white")})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:r.name}),(0,s.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat("income"===e.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:e.type})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description||"Sem descri\xe7\xe3o"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 text-xs text-gray-500 mt-1",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("i",{className:"ri-calendar-line mr-1"}),new Date(e.date).toLocaleDateString()]}),(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)("i",{className:"".concat(l.icon," mr-1")}),l.name]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"text-lg font-bold ".concat("income"===e.type?"text-green-600":"text-red-600"),children:["income"===e.type?"+":"-","$",e.amount.toFixed(2)]})}),(0,s.jsx)("button",{onClick:()=>a(e.id),className:"w-8 h-8 flex items-center justify-center text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-full transition-colors",title:"Excluir transa\xe7\xe3o",children:(0,s.jsx)("i",{className:"ri-delete-bin-line"})})]})]},e.id)})})]})}function p(e){let{transactions:t,selectedMonth:a,budgetLimits:r}=e,l=t.filter(e=>e.date.startsWith(a)),i=l.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),n=l.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0),d=i-n,x=c.map(e=>{let t=l.filter(t=>"expense"===t.type&&t.category===e.id),a=t.reduce((e,t)=>e+t.amount,0),s=r.find(t=>t.categoryId===e.id);return{...e,total:a,transactions:t,budgetLimit:(null==s?void 0:s.limit)||0,percentage:n>0?a/n*100:0}}).filter(e=>e.total>0||e.budgetLimit>0),m=o.map(e=>{let t=l.filter(t=>"income"===t.type&&t.category===e.id),a=t.reduce((e,t)=>e+t.amount,0);return{...e,total:a,transactions:t,percentage:i>0?a/i*100:0}}).filter(e=>e.total>0);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"bg-green-50 rounded-2xl p-6 border border-green-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Total Income"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-700",children:["$",i.toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-arrow-up-line text-green-600 text-xl"})})]})}),(0,s.jsx)("div",{className:"bg-red-50 rounded-2xl p-6 border border-red-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-red-600 text-sm font-medium",children:"Total Expenses"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-700",children:["$",n.toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-arrow-down-line text-red-600 text-xl"})})]})}),(0,s.jsx)("div",{className:"".concat(d>=0?"bg-blue-50 border-blue-100":"bg-orange-50 border-orange-100"," rounded-2xl p-6 border"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"".concat(d>=0?"text-blue-600":"text-orange-600"," text-sm font-medium"),children:"Balance"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(d>=0?"text-blue-700":"text-orange-700"),children:["$",Math.abs(d).toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 ".concat(d>=0?"bg-blue-100":"bg-orange-100"," rounded-full flex items-center justify-center"),children:(0,s.jsx)("i",{className:"".concat(d>=0?"ri-wallet-line text-blue-600":"ri-alert-line text-orange-600"," text-xl")})})]})})]}),x.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,s.jsx)("i",{className:"ri-pie-chart-line text-red-600 mr-2"}),"Expense Categories"]}),(0,s.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,s.jsx)("i",{className:"".concat(e.icon," text-white")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.transactions.length," transactions"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-gray-800",children:["$",e.total.toFixed(2)]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.percentage.toFixed(1),"%"]}),e.budgetLimit>0&&(0,s.jsxs)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(e.total>e.budgetLimit?"bg-red-100 text-red-600":"bg-green-100 text-green-600"),children:["$",e.budgetLimit," limit"]})]})]})]},e.id))})]}),m.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[(0,s.jsx)("i",{className:"ri-line-chart-line text-green-600 mr-2"}),"Income Sources"]}),(0,s.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,s.jsx)("i",{className:"".concat(e.icon," text-white")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-800",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.transactions.length," transactions"]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"font-bold text-gray-800",children:["$",e.total.toFixed(2)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:[e.percentage.toFixed(1),"%"]})]})]},e.id))})]})]})}var g=a(58581),h=a(22175),b=a(90457),j=a(67732),f=a(27112),v=a(86354),y=a(394),N=a(15255),w=a(12800),k=a(66963),C=a(23021),S=a(94973),F=a(16161),E=a(36),D=a(90518);function B(e){let{transactions:t,selectedMonth:a}=e,[r,i]=(0,l.useState)("expense-breakdown"),[n,d]=(0,l.useState)("pie"),[x,m]=(0,l.useState)("monthly"),[u,p]=(0,l.useState)([]),B=[{name:"Food & Dining",value:450,color:"orange"},{name:"Transportation",value:320,color:"green"},{name:"Housing",value:1200,color:"blue"},{name:"Entertainment",value:180,color:"purple"},{name:"Healthcare",value:280,color:"red"},{name:"Personal Care",value:120,color:"pink"}],T=[{date:"Jan",income:3500,expenses:2800,balance:700},{date:"Feb",income:3800,expenses:3100,balance:700},{date:"Mar",income:3600,expenses:2900,balance:700},{date:"Apr",income:4e3,expenses:3200,balance:800},{date:"May",income:3700,expenses:3e3,balance:700},{date:"Jun",income:4200,expenses:3400,balance:800}],A=t.filter(e=>e.date.startsWith(a)),O=(0,l.useMemo)(()=>0===A.length?B:c.map(e=>{let t=A.filter(t=>"expense"===t.type&&t.category===e.id).reduce((e,t)=>e+t.amount,0);return{name:e.name,value:t,color:e.color.replace("bg-","").replace("-500","")}}).filter(e=>e.value>0),[A]),L=(0,l.useMemo)(()=>[...c,...o].map(e=>{let t=A.filter(t=>"expense"===t.type&&t.category===e.id).reduce((e,t)=>e+t.amount,0),a=A.filter(t=>"income"===t.type&&t.category===e.id).reduce((e,t)=>e+t.amount,0);return{category:e.name,expenses:t,income:a,total:t+a}}).filter(e=>e.total>0),[A]),I=(0,l.useMemo)(()=>{if(0===t.length)return T;let e=[],a=new Date;for(let s=5;s>=0;s--){let r=new Date(a.getFullYear(),a.getMonth()-s,1),l=r.toISOString().slice(0,7),i=t.filter(e=>e.date.startsWith(l)),n=i.filter(e=>"income"===e.type).reduce((e,t)=>e+t.amount,0),c=i.filter(e=>"expense"===e.type).reduce((e,t)=>e+t.amount,0);e.push({date:r.toLocaleDateString("en-US",{month:"short",year:"2-digit"}),income:n,expenses:c,balance:n-c})}return e},[t]),$={blue:"#3B82F6",green:"#10B981",orange:"#F59E0B",red:"#EF4444",gray:"#6B7280",emerald:"#059669",purple:"#8B5CF6",pink:"#EC4899",indigo:"#6366F1",amber:"#F59E0B",rose:"#F43F5E",slate:"#64748B"},K=e=>$[e.split("-")[0]]||"#6B7280",R=[{id:"expense-breakdown",label:"\uD83D\uDD52 Expense Breakdown",icon:"ri-pie-chart-line",views:["pie","bar"]},{id:"category-comparison",label:"\uD83D\uDCCA Category Comparison",icon:"ri-bar-chart-line",views:["bar","pie"]},{id:"trends",label:"\uD83D\uDCC8 Trends",icon:"ri-line-chart-line",views:["line","bar","area"]}],P=R.find(e=>e.id===r);return(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between mb-6 space-y-4 lg:space-y-0",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Charts & Analytics"}),(0,s.jsx)("div",{className:"flex rounded-lg bg-gray-50 p-1",children:R.map(e=>(0,s.jsx)("button",{onClick:()=>{i(e.id),d(e.views[0])},className:"px-4 py-2 rounded-md text-sm font-medium whitespace-nowrap transition-all flex items-center space-x-2 ".concat(r===e.id?"bg-purple-100 text-purple-700 shadow-sm":"text-gray-600 hover:text-purple-600"),children:(0,s.jsx)("span",{children:e.label})},e.id))})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-6 space-y-3 sm:space-y-0",children:[P&&(0,s.jsx)("div",{className:"flex rounded-lg bg-gray-50 p-1",children:P.views.map(e=>(0,s.jsxs)("button",{onClick:()=>d(e),className:"px-3 py-1.5 rounded-md text-xs font-medium transition-all ".concat(n===e?"bg-blue-100 text-blue-700 shadow-sm":"text-gray-600 hover:text-blue-600"),children:["pie"===e&&"Pie Chart","bar"===e&&"Bar Chart","line"===e&&"Line Chart","area"===e&&"Area Chart"]},e))}),(0,s.jsx)("div",{className:"flex items-center space-x-3",children:"category-comparison"===r&&(0,s.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"px-3 py-1.5 text-sm border border-gray-300 rounded-md bg-white focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,s.jsx)("option",{value:"monthly",children:"Monthly"}),(0,s.jsx)("option",{value:"quarterly",children:"Quarterly"}),(0,s.jsx)("option",{value:"yearly",children:"Yearly"})]})})]}),(0,s.jsxs)("div",{className:"h-96",children:["expense-breakdown"===r&&(0===O.length?(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("i",{className:"ri-pie-chart-line text-4xl mb-4"}),(0,s.jsx)("p",{children:"No expense data available for this month"})]})}):"pie"===n?(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(h.r,{children:[(0,s.jsx)(b.F,{data:O,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",label:e=>{let{name:t,percent:a}=e;return"".concat(t," ").concat((100*a).toFixed(0),"%")},children:O.map((e,t)=>(0,s.jsx)(j.f,{fill:K(e.color)},"cell-".concat(t)))}),(0,s.jsx)(f.m,{formatter:e=>["$".concat(e.toFixed(2)),"Amount"],labelFormatter:e=>"".concat(e)}),(0,s.jsx)(v.s,{})]})}):"bar"===n?(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.E,{data:O,margin:{top:20,right:30,left:20,bottom:60},children:[(0,s.jsx)(N.d,{strokeDasharray:"3 3"}),(0,s.jsx)(w.W,{dataKey:"name",angle:-45,textAnchor:"end",height:80,fontSize:12}),(0,s.jsx)(k.h,{}),(0,s.jsx)(f.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,s.jsx)(C.y,{dataKey:"value",fill:"#8B5CF6"})]})}):void 0),"category-comparison"===r&&(()=>{if(0===L.length)return(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("i",{className:"ri-bar-chart-line text-4xl mb-4"}),(0,s.jsx)("p",{children:"No transaction data available for comparison"})]})});if("bar"===n)return(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.E,{data:L,margin:{top:20,right:30,left:20,bottom:60},children:[(0,s.jsx)(N.d,{strokeDasharray:"3 3"}),(0,s.jsx)(w.W,{dataKey:"category",angle:-45,textAnchor:"end",height:80,fontSize:12}),(0,s.jsx)(k.h,{}),(0,s.jsx)(f.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,s.jsx)(v.s,{}),(0,s.jsx)(C.y,{dataKey:"income",fill:"#10B981",name:"Income"}),(0,s.jsx)(C.y,{dataKey:"expenses",fill:"#EF4444",name:"Expenses"})]})});if("pie"===n){let e=L.map(e=>({name:e.category,value:e.total,color:e.expenses>e.income?"red":"green"}));return(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(h.r,{children:[(0,s.jsx)(b.F,{data:e,cx:"50%",cy:"50%",innerRadius:60,outerRadius:120,paddingAngle:2,dataKey:"value",label:e=>{let{name:t,percent:a}=e;return"".concat(t," ").concat((100*a).toFixed(0),"%")},children:e.map((e,t)=>(0,s.jsx)(j.f,{fill:K(e.color)},"cell-".concat(t)))}),(0,s.jsx)(f.m,{formatter:e=>["$".concat(e.toFixed(2)),"Total"]}),(0,s.jsx)(v.s,{})]})})}})(),"trends"===r&&("line"===n?(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(S.b,{data:I,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(N.d,{strokeDasharray:"3 3"}),(0,s.jsx)(w.W,{dataKey:"date"}),(0,s.jsx)(k.h,{}),(0,s.jsx)(f.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,s.jsx)(v.s,{}),(0,s.jsx)(F.N,{type:"monotone",dataKey:"income",stroke:"#10B981",strokeWidth:2,name:"Income"}),(0,s.jsx)(F.N,{type:"monotone",dataKey:"expenses",stroke:"#EF4444",strokeWidth:2,name:"Expenses"}),(0,s.jsx)(F.N,{type:"monotone",dataKey:"balance",stroke:"#3B82F6",strokeWidth:2,name:"Balance"})]})}):"bar"===n?(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(y.E,{data:I,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(N.d,{strokeDasharray:"3 3"}),(0,s.jsx)(w.W,{dataKey:"date"}),(0,s.jsx)(k.h,{}),(0,s.jsx)(f.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,s.jsx)(v.s,{}),(0,s.jsx)(C.y,{dataKey:"income",fill:"#10B981",name:"Income"}),(0,s.jsx)(C.y,{dataKey:"expenses",fill:"#EF4444",name:"Expenses"}),(0,s.jsx)(C.y,{dataKey:"balance",fill:"#3B82F6",name:"Balance"})]})}):"area"===n?(0,s.jsx)(g.u,{width:"100%",height:"100%",children:(0,s.jsxs)(E.Q,{data:I,margin:{top:20,right:30,left:20,bottom:5},children:[(0,s.jsx)(N.d,{strokeDasharray:"3 3"}),(0,s.jsx)(w.W,{dataKey:"date"}),(0,s.jsx)(k.h,{}),(0,s.jsx)(f.m,{formatter:e=>"$".concat(e.toFixed(2))}),(0,s.jsx)(v.s,{}),(0,s.jsx)(D.G,{type:"monotone",dataKey:"income",stackId:"1",stroke:"#10B981",fill:"#10B981",fillOpacity:.6,name:"Income"}),(0,s.jsx)(D.G,{type:"monotone",dataKey:"expenses",stackId:"1",stroke:"#EF4444",fill:"#EF4444",fillOpacity:.6,name:"Expenses"})]})}):void 0)]}),(0,s.jsx)("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-3 gap-4",children:"expense-breakdown"===r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total Expenses"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:["$",O.reduce((e,t)=>e+t.value,0).toFixed(2)]})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Categories"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:O.length})]}),(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Largest Category"}),(0,s.jsx)("div",{className:"text-lg font-semibold text-gray-800",children:O.length>0?O[0].name:"N/A"})]})]})})]})}function T(e){let{budgetLimits:t,onUpdate:a,transactions:r,selectedMonth:i}=e,[n,o]=(0,l.useState)(null),[d,x]=(0,l.useState)(""),m=r.filter(e=>e.date.startsWith(i)&&"expense"===e.type),u=c.map(e=>{let a=m.filter(t=>t.category===e.id).reduce((e,t)=>e+t.amount,0),s=t.find(t=>t.categoryId===e.id),r=(null==s?void 0:s.limit)||0;return{...e,spent:a,limit:r,percentage:r>0?a/r*100:0,isOverBudget:r>0&&a>r,remaining:r>0?r-a:0}}),p=(e,t)=>{o(e),x(t.toString())},g=e=>{a(e,parseFloat(d)||0),o(null),x("")},h=()=>{o(null),x("")},b=u.reduce((e,t)=>e+t.limit,0),j=u.reduce((e,t)=>e+t.spent,0),f=u.filter(e=>e.isOverBudget).length;return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)("div",{className:"bg-blue-50 rounded-2xl p-6 border border-blue-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Total Budget"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-700",children:["$",b.toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-wallet-line text-blue-600 text-xl"})})]})}),(0,s.jsx)("div",{className:"bg-purple-50 rounded-2xl p-6 border border-purple-100",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Total Spent"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-purple-700",children:["$",j.toFixed(2)]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,s.jsx)("i",{className:"ri-shopping-cart-line text-purple-600 text-xl"})})]})}),(0,s.jsx)("div",{className:"".concat(f>0?"bg-red-50 border-red-100":"bg-green-50 border-green-100"," rounded-2xl p-6 border"),children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"".concat(f>0?"text-red-600":"text-green-600"," text-sm font-medium"),children:"Over Budget"}),(0,s.jsxs)("p",{className:"text-2xl font-bold ".concat(f>0?"text-red-700":"text-green-700"),children:[f," ",1===f?"Category":"Categories"]})]}),(0,s.jsx)("div",{className:"w-12 h-12 ".concat(f>0?"bg-red-100":"bg-green-100"," rounded-full flex items-center justify-center"),children:(0,s.jsx)("i",{className:"".concat(f>0?"ri-alert-line text-red-600":"ri-check-line text-green-600"," text-xl")})})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("i",{className:"ri-settings-line text-purple-600 mr-2"}),"Budget Limits by Category"]}),(0,s.jsx)("div",{className:"space-y-4",children:u.map(e=>(0,s.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat(e.color),children:(0,s.jsx)("i",{className:"".concat(e.icon," text-white")})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-medium text-gray-800",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Spent: $",e.spent.toFixed(2),e.limit>0&&(0,s.jsxs)("span",{className:"ml-2",children:["/ $",e.limit.toFixed(2)," (",e.percentage.toFixed(1),"%)"]})]})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[e.isOverBudget&&(0,s.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-600 text-xs rounded-full",children:["Over by $",(e.spent-e.limit).toFixed(2)]}),n===e.id?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 text-sm",children:"$"}),(0,s.jsx)("input",{type:"number",value:d,onChange:e=>x(e.target.value),className:"w-24 pl-6 pr-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-purple-300",placeholder:"0.00"})]}),(0,s.jsx)("button",{onClick:()=>g(e.id),className:"w-6 h-6 flex items-center justify-center text-green-600 hover:bg-green-50 rounded",children:(0,s.jsx)("i",{className:"ri-check-line text-sm"})}),(0,s.jsx)("button",{onClick:h,className:"w-6 h-6 flex items-center justify-center text-gray-400 hover:bg-gray-50 rounded",children:(0,s.jsx)("i",{className:"ri-close-line text-sm"})})]}):(0,s.jsxs)("button",{onClick:()=>p(e.id,e.limit),className:"px-3 py-1 text-sm text-purple-600 hover:bg-purple-50 rounded-lg transition-colors flex items-center space-x-1",children:[(0,s.jsx)("i",{className:"ri-edit-line text-xs"}),(0,s.jsxs)("span",{children:[e.limit>0?"Edit":"Set"," Limit"]})]})]})]}),e.limit>0&&(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(e.isOverBudget?"bg-red-500":"bg-green-500"),style:{width:"".concat(Math.min(e.percentage,100),"%")}})})]},e.id))})]})]})}var A=a(26855),O=a(13697);let L=["application/pdf","image/jpeg","image/png"];function I(){let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)(!1),[n,o]=(0,l.useState)(!1),[x,m]=(0,l.useState)([]),[u,p]=(0,l.useState)({}),g=(0,l.useRef)(null),{user:h}=(0,r.A)(),[b,j]=(0,l.useState)({}),[f,v]=(0,l.useState)({}),y=a=>{if(!a)return;let s=[];Array.from(a).forEach(e=>{if(!L.includes(e.type)){s.push({file:e,previewUrl:"",error:"Tipo de arquivo n\xe3o suportado."});return}let t="";e.type.startsWith("image/")&&(t=URL.createObjectURL(e)),s.push({file:e,previewUrl:t})}),t(e=>[...e,...s]),s.length>0&&N([...e,...s])},N=async e=>{o(!0),m([]),p({});let t=new FormData;e.forEach(e=>t.append("file",e.file));try{let e=await fetch("/api/receipts/upload",{method:"POST",body:t}),a=await e.json();if(a.success&&a.results){m(a.results);let e={};a.results.forEach(t=>{e[t.fileName]={...t}}),p(e)}}catch(e){}finally{o(!1)}},w=(e,t,a)=>{p(s=>({...s,[e]:{...s[e],[t]:a}}))},k=(e,t)=>{p(a=>({...a,[e]:{...a[e],categoriaSugerida:t}}))},C=(e,t)=>{p(a=>({...a,[e]:{...a[e],conta:t}}))},S=async e=>{if(!h){v(t=>({...t,[e]:"Usu\xe1rio n\xe3o autenticado."}));return}j(t=>({...t,[e]:!0})),v(t=>({...t,[e]:""}));let t=u[e];try{let a=parseFloat((t.valor||"0").replace(/[^\d,\.]/g,"").replace(",","."));if(!a||!t.dataVencimento||!t.categoriaSugerida){v(t=>({...t,[e]:"Preencha valor, data e categoria."})),j(t=>({...t,[e]:!1}));return}let s={id:(0,O.A)(),type:"expense",amount:a,category:t.categoriaSugerida,description:t.nomeEmissor||"Recibo/Boleto importado",date:t.dataVencimento.split("/").reverse().join("-"),account:t.conta||d[0].id,linhaDigitavel:t.linhaDigitavel||void 0},{error:r}=await (0,A.KA)(s,h.id);r?v(t=>({...t,[e]:"Erro ao salvar: "+r.message})):v(t=>({...t,[e]:"Transa\xe7\xe3o salva com sucesso!"}))}catch(t){v(a=>({...a,[e]:"Erro ao salvar: "+t.message}))}finally{j(t=>({...t,[e]:!1}))}};return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ".concat(a?"border-pink-400 bg-pink-50":"border-purple-300 bg-white"),onClick:()=>{var e;null===(e=g.current)||void 0===e||e.click()},onDrop:e=>{e.preventDefault(),i(!1),y(e.dataTransfer.files)},onDragOver:e=>{e.preventDefault(),i(!0)},onDragLeave:e=>{e.preventDefault(),i(!1)},role:"button",tabIndex:0,children:[(0,s.jsx)("input",{type:"file",multiple:!0,accept:".pdf,image/jpeg,image/png",className:"hidden",ref:g,onChange:e=>{y(e.target.files)},title:"Selecione arquivos PDF, JPG ou PNG para upload"}),(0,s.jsxs)("span",{className:"text-gray-500",children:["Arraste e solte arquivos PDF, JPG ou PNG aqui, ou ",(0,s.jsx)("span",{className:"text-pink-500 underline",children:"clique para selecionar"}),"."]})]}),n&&(0,s.jsx)("div",{className:"flex justify-center items-center mt-6",children:(0,s.jsx)("span",{className:"text-purple-600 animate-pulse",children:"Processando OCR..."})}),x.length>0&&(0,s.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(e=>{var t,a,r,l,i,n,o;return(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 shadow",children:[(0,s.jsx)("div",{className:"font-semibold text-purple-700 mb-2",children:e.fileName}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Valor"}),(0,s.jsx)("input",{className:"w-full border rounded px-2 py-1",value:(null===(t=u[e.fileName])||void 0===t?void 0:t.valor)||"",onChange:t=>w(e.fileName,"valor",t.target.value),placeholder:"Ex: R$ 123,45",title:"Valor do recibo ou boleto"}),(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Data de Vencimento"}),(0,s.jsx)("input",{className:"w-full border rounded px-2 py-1",value:(null===(a=u[e.fileName])||void 0===a?void 0:a.dataVencimento)||"",onChange:t=>w(e.fileName,"dataVencimento",t.target.value),placeholder:"Ex: 31/12/2024",title:"Data de vencimento"}),(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Linha Digit\xe1vel"}),(0,s.jsx)("input",{className:"w-full border rounded px-2 py-1",value:(null===(r=u[e.fileName])||void 0===r?void 0:r.linhaDigitavel)||"",onChange:t=>w(e.fileName,"linhaDigitavel",t.target.value),placeholder:"Linha digit\xe1vel do boleto",title:"Linha digit\xe1vel"}),(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Nome do Emissor"}),(0,s.jsx)("input",{className:"w-full border rounded px-2 py-1",value:(null===(l=u[e.fileName])||void 0===l?void 0:l.nomeEmissor)||"",onChange:t=>w(e.fileName,"nomeEmissor",t.target.value),placeholder:"Nome do emissor",title:"Nome do emissor"}),(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Categoria Sugerida"}),(0,s.jsxs)("select",{className:"w-full border rounded px-2 py-1",value:(null===(i=u[e.fileName])||void 0===i?void 0:i.categoriaSugerida)||"",onChange:t=>k(e.fileName,t.target.value),title:"Categoria sugerida",children:[(0,s.jsx)("option",{value:"",children:"Selecione a categoria"}),c.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Conta"}),(0,s.jsx)("select",{className:"w-full border rounded px-2 py-1",value:(null===(n=u[e.fileName])||void 0===n?void 0:n.conta)||d[0].id,onChange:t=>C(e.fileName,t.target.value),title:"Conta",children:d.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))}),(0,s.jsx)("button",{className:"mt-2 w-full bg-purple-600 hover:bg-purple-700 text-white font-semibold py-2 px-4 rounded transition-colors disabled:opacity-50",onClick:()=>S(e.fileName),disabled:b[e.fileName],type:"button",children:b[e.fileName]?"Salvando...":"Salvar como transa\xe7\xe3o"}),f[e.fileName]&&(0,s.jsx)("div",{className:"mt-2 text-sm ".concat(f[e.fileName].includes("sucesso")?"text-green-600":"text-red-600"),children:f[e.fileName]}),(0,s.jsx)("label",{className:"block text-xs text-gray-500",children:"Texto Extra\xeddo"}),(0,s.jsx)("textarea",{className:"w-full border rounded px-2 py-1 text-xs",rows:3,value:(null===(o=u[e.fileName])||void 0===o?void 0:o.text)||"",onChange:t=>w(e.fileName,"text",t.target.value),placeholder:"Texto extra\xeddo do documento",title:"Texto extra\xeddo"})]})]},e.fileName)})}),e.length>0&&0===x.length&&(0,s.jsx)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 gap-4",children:e.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-4 bg-gray-50 rounded p-3 shadow-sm",children:[e.previewUrl?(0,s.jsx)("img",{src:e.previewUrl,alt:e.file.name,className:"w-16 h-16 object-contain rounded border"}):(0,s.jsx)("span",{className:"w-16 h-16 flex items-center justify-center bg-purple-100 rounded border text-purple-700 font-bold",children:"PDF"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-medium text-gray-800",children:e.file.name}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:[(e.file.size/1024).toFixed(1)," KB"]}),e.error&&(0,s.jsx)("div",{className:"text-xs text-red-500 mt-1",children:e.error})]})]},t))})]})}function $(){let[e,t]=(0,l.useState)([]),[a,i]=(0,l.useState)([]),[c,o]=(0,l.useState)("overview"),[d,m]=(0,l.useState)(new Date().toISOString().slice(0,7)),{user:g}=(0,r.A)();(0,l.useEffect)(()=>{if(g){h();let e=null===A.ND||void 0===A.ND?void 0:A.ND.channel("realtime-transactions").on("postgres_changes",{event:"INSERT",schema:"public",table:"transactions",filter:"user_id=eq.".concat(g.id)},e=>{let a=e.new;t(e=>e.some(e=>e.id===a.id)?e:[...e,a])}).subscribe();return()=>{null==e||e.unsubscribe()}}},[g]);let h=async()=>{if(g)try{let[e,a]=await Promise.all([(0,A.I0)(g.id),(0,A.w_)(g.id)]);e.data&&t(e.data),a.data&&i(a.data)}catch(e){console.error("Error loading data:",e)}},b=async e=>{if(!g)return;let a={...e,id:(0,O.A)()},{account:s,...r}=a;try{let{error:e}=await (0,A.KA)(r,g.id);e||t(e=>[...e,a])}catch(e){console.error("Error saving transaction:",e)}},j=async e=>{if(g)try{let{error:a}=await (0,A.Uw)(e,g.id);a||t(t=>t.filter(t=>t.id!==e))}catch(e){console.error("Error deleting transaction:",e)}},f=async(e,t)=>{if(!g)return;let s=a.filter(t=>t.categoryId!==e);t>0&&s.push({categoryId:e,limit:t});try{let{error:a}=await (0,A.CQ)({categoryId:e,limit:t},g.id);a||i(s)}catch(e){console.error("Error saving budget limit:",e)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50",children:[(0,s.jsx)(n,{activeTab:c,setActiveTab:o,tabs:[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"transactions",label:"Transactions",icon:"ri-list-check-line"},{id:"charts",label:"Charts",icon:"ri-bar-chart-line"},{id:"budgets",label:"Budget Limits",icon:"ri-wallet-line"},{id:"receipts",label:"Recibos & Boletos",icon:"ri-file-list-3-line"}],selectedMonth:d,setSelectedMonth:m}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 py-8",children:["overview"===c&&(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-1",children:(0,s.jsx)(x,{onSubmit:b})}),(0,s.jsx)("div",{className:"lg:col-span-2",children:(0,s.jsx)(p,{transactions:e,selectedMonth:d,budgetLimits:a})})]}),"transactions"===c&&(0,s.jsx)(u,{transactions:e,onDelete:j,selectedMonth:d}),"charts"===c&&(0,s.jsx)(B,{transactions:e,selectedMonth:d}),"budgets"===c&&(0,s.jsx)(T,{budgetLimits:a,onUpdate:f,transactions:e,selectedMonth:d}),"receipts"===c&&(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-purple-700 mb-6",children:"Recibos & Boletos"}),(0,s.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,s.jsx)(I,{})})]})]})]})}var K=a(53187);function R(){let{user:e,loading:t}=(0,r.A)();return t?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("i",{className:"ri-loader-4-line animate-spin text-4xl text-purple-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})}):e?(0,s.jsx)($,{}):(0,s.jsx)(K.default,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[232,19,187,441,517,358],()=>t(74699)),_N_E=e.O()}]);